<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Apple Store üçé</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#fff;
  color:#000;
}
header{
  position:sticky;
  top:0;
  background:#fff;
  padding:14px 20px;
  display:flex;
  justify-content:space-between;
  border-bottom:1px solid #eee;
  z-index:10;
}
header span{cursor:pointer}
section{display:none}
section.active{display:block}
.hero{text-align:center;padding:80px 20px}
.hero img{width:260px;transition:.8s}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
  padding:20px;
}
.card{
  background:#f5f5f7;
  border-radius:28px;
  padding:24px;
  text-align:center;
  transition:.4s;
}
.card:hover{transform:translateY(-6px)}
.card img{width:140px}
button{
  margin-top:12px;
  padding:12px 22px;
  border-radius:999px;
  border:none;
  background:#0071e3;
  color:#fff;
  font-size:16px;
}
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  align-items:center;
  justify-content:center;
}
.modal{
  background:#fff;
  border-radius:28px;
  padding:24px;
  width:90%;
  max-width:420px;
}
</style>
</head>

<body>

<header>
  <b onclick="show('catalog')">Apple Store</b>
  <span onclick="openCart()">–ö–æ—Ä–∑–∏–Ω–∞ (<span id="count">0</span>)</span>
</header>

<!-- CATALOG -->
<section id="catalog" class="active">
  <div class="hero">
    <h1>iPhone</h1>
    <p>–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å. –ö–∞–∫ –≤—Å–µ–≥–¥–∞.</p>
    <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg">
  </div>

  <div class="grid">
    <div class="card" onclick="openProduct(1)">
      <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg">
      <h3>iPhone 15 Pro</h3>
      <p>119 990 ‚ÇΩ</p>
    </div>
    <div class="card" onclick="openProduct(2)">
      <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg">
      <h3>iPhone 15</h3>
      <p>89 990 ‚ÇΩ</p>
    </div>
    <div class="card" onclick="openProduct(3)">
      <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg">
      <h3>iPhone 14</h3>
      <p>69 990 ‚ÇΩ</p>
    </div>
  </div>
</section>

<!-- PRODUCT -->
<section id="product">
  <div class="hero">
    <h1 id="pName"></h1>
    <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg">
    <p id="pPrice"></p>
    <button onclick="add()">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
    <br><br>
    <button onclick="show('catalog')">‚Üê –ù–∞–∑–∞–¥</button>
  </div>
</section>

<!-- CART -->
<div id="cart" class="overlay">
  <div class="modal">
    <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
    <div id="items"></div>
    <button onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button><br><br>
    <button onclick="closeCart()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<script>
const products={
  1:{id:1,name:'iPhone 15 Pro',price:119990},
  2:{id:2,name:'iPhone 15',price:89990},
  3:{id:3,name:'iPhone 14',price:69990}
};

let current=null;
let cart=JSON.parse(localStorage.getItem('cart')||'[]');

function show(id){
  document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function openProduct(id){
  current=id;
  pName.innerText=products[id].name;
  pPrice.innerText=products[id].price+' ‚ÇΩ';
  show('product');
}

function add(){
  cart.push(products[current]);
  save();
  alert('–î–æ–±–∞–≤–ª–µ–Ω–æ üçé');
}

function save(){
  localStorage.setItem('cart',JSON.stringify(cart));
  count.innerText=cart.length;
}

function openCart(){
  items.innerHTML='';
  const map={};
  cart.forEach(p=>map[p.name]=(map[p.name]||0)+1);
  for(let k in map){
    items.innerHTML+=`
      <p>${k} √ó ${map[k]}
      <button onclick="remove('${k}')">‚úï</button></p>`;
  }
  if(cart.length===0) items.innerHTML='<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
  cartDiv.style.display='flex';
}

function remove(name){
  const i=cart.findIndex(p=>p.name===name);
  if(i>-1) cart.splice(i,1);
  save();
  openCart();
}

function closeCart(){
  cartDiv.style.display='none';
}

function checkout(){
  items.innerHTML=`
    <h3>–°–ø–∞—Å–∏–±–æ üçé</h3>
    <p>–°—É–º–º–∞: ${cart.reduce((s,p)=>s+p.price,0)} ‚ÇΩ</p>
  `;
  cart=[];
  save();
}

const cartDiv=document.getElementById('cart');
save();
</script>

</body>
</html>
