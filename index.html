<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Apple Store üçé</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
*{box-sizing:border-box}
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,sans-serif;background:#fff;color:#000}
header{position:sticky;top:0;background:#fff;padding:14px 20px;display:flex;justify-content:space-between;border-bottom:1px solid #eee;z-index:10}
header span{cursor:pointer}
section{display:none;animation:fade .4s ease}
section.active{display:block}
@keyframes fade{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:none}}
.hero{text-align:center;padding:60px 20px}
.sale{color:#d60000;font-weight:600;font-size:20px;margin-top:10px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;padding:20px}
.card{background:#f5f5f7;border-radius:28px;padding:24px;text-align:center;transition:.4s;cursor:pointer}
.card:hover{transform:translateY(-6px)}
button{margin-top:12px;padding:12px 22px;border-radius:999px;border:none;background:#0071e3;color:#fff;font-size:16px;cursor:pointer}
.old-price{ text-decoration:line-through; color:#888; font-size:14px; }
.options{display:flex;justify-content:center;gap:10px;margin:16px 0;flex-wrap:wrap}
.option{padding:10px 16px;border-radius:999px;border:1px solid #ddd;cursor:pointer}
.option.active{background:#000;color:#fff}
</style>
</head>

<body>

<header>
  <b onclick="show('catalog')">Apple Store</b>
  <span onclick="show('cart')">–ö–æ—Ä–∑–∏–Ω–∞ (<span id="count">0</span>)</span>
</header>

<!-- –ö–∞—Ç–∞–ª–æ–≥ -->
<section id="catalog" class="active">
  <div class="hero">
    <h1>iPhone</h1>
    <p class="sale">üî• –°–ö–ò–î–ö–ò 20% –ù–ê –í–°–ï –¢–û–í–ê–†–´!</p>
    <button onclick="clearCart()" style="background:#d60000">–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>
  <div class="grid">
    <div class="card" onclick="openProduct(1)">
      <h3>iPhone 15 Pro</h3>
      <p><span class="old-price">119 990 ‚ÇΩ</span><br>–æ—Ç 95 992 ‚ÇΩ</p>
    </div>
    <div class="card" onclick="openProduct(2)">
      <h3>iPhone 15</h3>
      <p><span class="old-price">89 990 ‚ÇΩ</span><br>–æ—Ç 71 992 ‚ÇΩ</p>
    </div>
    <div class="card" onclick="openProduct(3)">
      <h3>iPhone 14 Pro</h3>
      <p><span class="old-price">99 990 ‚ÇΩ</span><br>–æ—Ç 79 992 ‚ÇΩ</p>
    </div>
    <div class="card" onclick="openProduct(4)">
      <h3>iPhone 14</h3>
      <p><span class="old-price">83 990 ‚ÇΩ</span><br>–æ—Ç 67 192 ‚ÇΩ</p>
    </div>
    <div class="card" onclick="openProduct(5)">
      <h3>iPhone 13 Pro</h3>
      <p><span class="old-price">89 990 ‚ÇΩ</span><br>–æ—Ç 71 992 ‚ÇΩ</p>
    </div>
    <div class="card" onclick="openProduct(6)">
      <h3>iPhone 13</h3>
      <p><span class="old-price">79 990 ‚ÇΩ</span><br>–æ—Ç 63 992 ‚ÇΩ</p>
    </div>
    <div class="card" onclick="openProduct(7)">
      <h3>iPhone 12 Pro</h3>
      <p><span class="old-price">69 990 ‚ÇΩ</span><br>–æ—Ç 55 992 ‚ÇΩ</p>
    </div>
    <div class="card" onclick="openProduct(8)">
      <h3>iPhone 12</h3>
      <p><span class="old-price">59 990 ‚ÇΩ</span><br>–æ—Ç 47 992 ‚ÇΩ</p>
    </div>
    <div class="card" onclick="openProduct(9)">
      <h3>iPhone 11</h3>
      <p><span class="old-price">49 990 ‚ÇΩ</span><br>–æ—Ç 39 992 ‚ÇΩ</p>
    </div>
  </div>
</section>

<!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–¥—É–∫—Ç–∞ -->
<section id="product">
  <div class="hero">
    <h1 id="pName"></h1>
    <h2 id="pPrice"></h2>

    <h3>–¶–≤–µ—Ç</h3>
    <div class="options" id="colors"></div>

    <h3>–ü–∞–º—è—Ç—å</h3>
    <div class="options" id="memory"></div>

    <button onclick="faceID()">Face ID / –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button><br><br>
    <button onclick="show('catalog')">‚Üê –ù–∞–∑–∞–¥</button>
  </div>
</section>

<!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
<section id="cart">
  <div class="hero">
    <h1>–ö–æ—Ä–∑–∏–Ω–∞</h1>
    <div id="cartItems"></div>
    <h3>–ù–µ–¥–∞–≤–Ω–∏–µ –∑–∞–∫–∞–∑—ã</h3>
    <div id="recentOrders"></div>
    <button onclick="downloadPDF()">–°–∫–∞—á–∞—Ç—å PDF —á–µ–∫</button><br><br>
    <button onclick="show('catalog')">‚Üê –ù–∞–∑–∞–¥</button>
  </div>
</section>

<script>
const DISCOUNT = 0.8;
let cart = [];
let recentOrders = [];
let current = null;
let selectedColor = '';
let selectedMemory = '';

const products = {
  1:{name:'iPhone 15 Pro',base:119990*DISCOUNT,colors:['–ß—ë—Ä–Ω—ã–π'],memory:['128 –ì–ë'],memoryPrice:{'128 –ì–ë':0},image:''},
  2:{name:'iPhone 15',base:89990*DISCOUNT,colors:['–ß—ë—Ä–Ω—ã–π'],memory:['128 –ì–ë'],memoryPrice:{'128 –ì–ë':0},image:''},
  3:{name:'iPhone 14 Pro',base:99990*DISCOUNT,colors:['–§–∏–æ–ª–µ—Ç–æ–≤—ã–π','–ß—ë—Ä–Ω—ã–π'],memory:['128 –ì–ë','256 –ì–ë'],memoryPrice:{'128 –ì–ë':0,'256 –ì–ë':3000}},
  4:{name:'iPhone 14',base:83990*DISCOUNT,colors:['–°–∏–Ω–∏–π','–ë–µ–ª—ã–π'],memory:['128 –ì–ë'],memoryPrice:{'128 –ì–ë':0}},
  5:{name:'iPhone 13 Pro',base:89990*DISCOUNT,colors:['–ì—Ä–∞—Ñ–∏—Ç'],memory:['128 –ì–ë'],memoryPrice:{'128 –ì–ë':0}},
  6:{name:'iPhone 13',base:79990*DISCOUNT,colors:['–†–æ–∑–æ–≤—ã–π'],memory:['128 –ì–ë'],memoryPrice:{'128 –ì–ë':0}},
  7:{name:'iPhone 12 Pro',base:69990*DISCOUNT,colors:['–°–µ—Ä—ã–π'],memory:['128 –ì–ë'],memoryPrice:{'128 –ì–ë':0}},
  8:{name:'iPhone 12',base:59990*DISCOUNT,colors:['–°–∏–Ω–∏–π'],memory:['128 –ì–ë'],memoryPrice:{'128 –ì–ë':0}},
  9:{name:'iPhone 11',base:49990*DISCOUNT,colors:['–ë–µ–ª—ã–π'],memory:['64 –ì–ë'],memoryPrice:{'64 –ì–ë':0}}
};

function show(id){
  document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function renderOptions(containerId, options, callback){
  const container = document.getElementById(containerId);
  container.innerHTML = '';
  options.forEach((opt,i)=>{
    const div = document.createElement('div');
    div.className = 'option' + (i===0?' active':'');
    div.innerText = opt;
    div.onclick = ()=>{
      container.querySelectorAll('.option').forEach(o=>o.classList.remove('active'));
      div.classList.add('active');
      callback(opt);
    };
    container.appendChild(div);
  });
}

function updatePrice(){
  const price = products[current].base + products[current].memoryPrice[selectedMemory];
  document.getElementById('pPrice').innerText = price.toLocaleString('ru-RU') + ' ‚ÇΩ';
}

function openProduct(id){
  current = id;
  const p = products[id];
  selectedColor = p.colors[0];
  selectedMemory = p.memory[0];
  document.getElementById('pName').innerText = p.name;
  renderOptions('colors', p.colors, val=>selectedColor=val);
  renderOptions('memory', p.memory, val=>{selectedMemory=val; updatePrice()});
  updatePrice();
  show('product');
}

function addToCart(){
  const p = products[current];
  const price = p.base + p.memoryPrice[selectedMemory];
  cart.push({name:p.name,color:selectedColor,memory:selectedMemory,price});
  document.getElementById('count').innerText = cart.length;
  alert('–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É: ' + p.name);
  recentOrders.push({name:p.name,color:selectedColor,memory:selectedMemory,price});
}

function faceID(){
  if(confirm('–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Face ID —É—Å–ø–µ—à–Ω–∞!')){
    addToCart();
  }
}

function openCart(){
  show('cart');
  const container = document.getElementById('cartItems');
  container.innerHTML = '';
  cart.forEach((item,i)=>{
    const div = document.createElement('div');
    div.innerText = `${i+1}. ${item.name} (${item.color}, ${item.memory}) ‚Äî ${item.price.toLocaleString('ru-RU')} ‚ÇΩ`;
    container.appendChild(div);
  });

  const recent = document.getElementById('recentOrders');
  recent.innerHTML = '';
  recentOrders.slice(-5).reverse().forEach((item,i)=>{
    const div = document.createElement('div');
    div.innerText = `${item.name} (${item.color}, ${item.memory}) ‚Äî ${item.price.toLocaleString('ru-RU')} ‚ÇΩ`;
    recent.appendChild(div);
  });
}

function clearCart(){
  if(confirm('–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É?')){cart=[];document.getElementById('count').innerText=0;}
}

function downloadPDF(){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  let y = 10;
  doc.text("Apple Store ‚Äî –ß–µ–∫", 10, y);
  y+=10;
  cart.forEach((item,i)=>{
    doc.text(`${i+1}. ${item.name} (${item.color}, ${item.memory}) ‚Äî ${item.price.toLocaleString('ru-RU')} ‚ÇΩ`, 10, y);
    y+=10;
  });
  doc.save('chek.pdf');
}
</script>

</body>
</html>
