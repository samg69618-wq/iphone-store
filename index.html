<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Apple Store Lite üçé</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#fff;
  color:#000;
}
header{
  position:sticky;
  top:0;
  background:#fff;
  padding:14px 20px;
  display:flex;
  justify-content:space-between;
  border-bottom:1px solid #eee;
  z-index:10;
}
.hero{
  text-align:center;
  padding:80px 20px;
}
.hero img{
  width:260px;
  transition:transform 1s cubic-bezier(.4,0,.2,1);
}
.hero.show img{transform:scale(1.05)}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
  padding:20px;
}
.card{
  background:#f5f5f7;
  border-radius:28px;
  padding:24px;
  text-align:center;
  transition:.6s cubic-bezier(.4,0,.2,1);
}
.card:hover{transform:translateY(-8px)}
.card img{width:140px}
button{
  margin-top:12px;
  padding:12px 22px;
  border-radius:999px;
  border:none;
  background:#0071e3;
  color:#fff;
  font-size:16px;
}
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  align-items:center;
  justify-content:center;
}
.modal{
  background:#fff;
  border-radius:32px;
  padding:26px;
  width:90%;
  max-width:420px;
}
.fly{
  position:fixed;
  width:160px;
  pointer-events:none;
  z-index:9999;
  transition:1s cubic-bezier(.4,0,.2,1);
}
.review{
  text-align:center;
  padding:40px 20px;
  color:#555;
}
</style>
</head>

<body>

<header>
  <b>Apple Store</b>
  <span onclick="openCart()">–ö–æ—Ä–∑–∏–Ω–∞ (<span id="count">0</span>)</span>
</header>

<section class="hero" id="hero">
  <h1>iPhone</h1>
  <p>–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å. –ö–∞–∫ –≤—Å–µ–≥–¥–∞.</p>
  <img id="heroImg" src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg">
</section>

<section class="grid">
  <div class="card">
    <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg">
    <h3>iPhone 15 Pro</h3>
    <p>119 990 ‚ÇΩ</p>
    <button onclick="add(1)">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>

  <div class="card">
    <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg">
    <h3>iPhone 15</h3>
    <p>89 990 ‚ÇΩ</p>
    <button onclick="add(2)">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>

  <div class="card">
    <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg">
    <h3>iPhone 14</h3>
    <p>69 990 ‚ÇΩ</p>
    <button onclick="add(3)">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>
</section>

<section class="review">
  ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê<br>
  1375 –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
</section>

<div id="cart" class="overlay">
  <div class="modal">
    <h2>–í–∞—à –∑–∞–∫–∞–∑</h2>
    <div id="items"></div>
    <br>
    <button onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button><br><br>
    <button onclick="closeCart()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<script>
/* ===== FIXED VARIABLES ===== */
const cartDiv = document.getElementById('cart');
const items = document.getElementById('items');

/* DATA */
const products={
  1:{name:'iPhone 15 Pro',price:119990},
  2:{name:'iPhone 15',price:89990},
  3:{name:'iPhone 14',price:69990}
};
let cart=JSON.parse(localStorage.getItem('cart-lite')||'[]');

/* INIT */
setTimeout(()=>hero.classList.add('show'),200);
updateCount();

/* CART */
function save(){
  localStorage.setItem('cart-lite',JSON.stringify(cart));
  updateCount();
}
function updateCount(){
  document.getElementById('count').innerText=cart.length;
}
function add(id){
  cart.push(products[id]);
  save();
  fly();
}
function openCart(){
  items.innerHTML='';
  if(cart.length===0){
    items.innerHTML='<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
  }else{
    cart.forEach(p=>{
      items.innerHTML+=`<p>${p.name}<br>${p.price} ‚ÇΩ</p>`;
    });
    items.innerHTML+=`
      <hr>
      <p><b>–ò—Ç–æ–≥–æ:</b> ${cart.reduce((s,p)=>s+p.price,0)} ‚ÇΩ</p>
    `;
  }
  cartDiv.style.display='flex';
}
function closeCart(){
  cartDiv.style.display='none';
}

/* CHECKOUT */
function checkout(){
  items.innerHTML=`
    <h3>–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑ üçé</h3>
    <p>–ù–æ–º–µ—Ä: APL-${Math.floor(Math.random()*900000+100000)}</p>
    <p>${new Date().toLocaleString()}</p>
    <hr>
    <p><b>–°—É–º–º–∞:</b> ${cart.reduce((s,p)=>s+p.price,0)} ‚ÇΩ</p>
    <p style="color:#777">Apple Store</p>
  `;
  cart=[];
  save();
}

/* FLY ANIMATION */
function fly(){
  const img=heroImg.cloneNode(true);
  const r=heroImg.getBoundingClientRect();
  img.className='fly';
  img.style.left=r.left+'px';
  img.style.top=r.top+'px';
  document.body.appendChild(img);
  setTimeout(()=>{
    img.style.transform='scale(.1) translate(200px,-200px)';
    img.style.opacity='0';
  },10);
  setTimeout(()=>img.remove(),1000);
}
</script>

</body>
</html>
