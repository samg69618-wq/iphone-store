<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Apple Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#fff;
  color:#000;
}
header{
  position:sticky;
  top:0;
  background:#fff;
  border-bottom:1px solid #eee;
  padding:14px 20px;
  display:flex;
  justify-content:space-between;
  z-index:10;
}
.hero{
  text-align:center;
  padding:60px 20px;
}
.hero img{
  width:200px;
  transition:.6s;
}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:20px;
  padding:20px;
}
.card{
  border-radius:20px;
  padding:20px;
  background:#f5f5f7;
  text-align:center;
}
.card img{width:120px}
button{
  background:#0071e3;
  color:#fff;
  border:none;
  border-radius:999px;
  padding:12px 20px;
  font-size:16px;
}
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.4);
  display:none;
  align-items:center;
  justify-content:center;
}
.modal{
  background:#fff;
  padding:20px;
  border-radius:20px;
  width:90%;
  max-width:400px;
}
.fly{
  position:fixed;
  width:120px;
  z-index:9999;
  transition:1s cubic-bezier(.4,0,.2,1);
  pointer-events:none;
}
</style>
</head>

<body>

<header>
  <b>Apple Store</b>
  <span onclick="openCart()">–ö–æ—Ä–∑–∏–Ω–∞ (<span id="count">0</span>)</span>
</header>

<section class="hero">
  <h1>iPhone</h1>
  <img id="heroImg" src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg">
</section>

<section class="grid">
  <div class="card">
    <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg">
    <h3>iPhone 15 Pro</h3>
    <p>119 990 ‚ÇΩ</p>
    <button onclick="add(1)">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>
  <div class="card">
    <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg">
    <h3>iPhone 15</h3>
    <p>89 990 ‚ÇΩ</p>
    <button onclick="add(2)">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>
</section>

<div id="cart" class="overlay">
  <div class="modal">
    <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
    <div id="items"></div>
    <br>
    <button onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button><br><br>
    <button onclick="closeCart()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<script>
let products={
  1:{name:'iPhone 15 Pro',price:119990},
  2:{name:'iPhone 15',price:89990}
};
let cart=JSON.parse(localStorage.getItem('cart')||'[]');

function save(){
  localStorage.setItem('cart',JSON.stringify(cart));
  document.getElementById('count').innerText=cart.length;
}

function add(id){
  cart.push(products[id]);
  save();
  fly();
}

function openCart(){
  let box=document.getElementById('items');
  box.innerHTML='';
  if(cart.length===0){
    box.innerHTML='<p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
  }else{
    cart.forEach(i=>{
      box.innerHTML+=`<p>${i.name} ‚Äî ${i.price} ‚ÇΩ</p>`;
    });
  }
  document.getElementById('cart').style.display='flex';
}

function closeCart(){
  document.getElementById('cart').style.display='none';
}

function checkout(){
  let sum=cart.reduce((s,i)=>s+i.price,0);
  document.getElementById('items').innerHTML=
    `<h3>–°–ø–∞—Å–∏–±–æ üçé</h3>
     <p>–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω</p>
     <p><b>–°—É–º–º–∞:</b> ${sum} ‚ÇΩ</p>
     <p>1375 –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤</p>`;
  cart=[];
  save();
}

function fly(){
  let img=document.getElementById('heroImg');
  let c=img.cloneNode(true);
  let a=img.getBoundingClientRect();
  c.className='fly';
  c.style.left=a.left+'px';
  c.style.top=a.top+'px';
  document.body.appendChild(c);
  setTimeout(()=>{
    c.style.transform='scale(.1)';
    c.style.opacity='0';
  },10);
  setTimeout(()=>c.remove(),1000);
}

save();
</script>

</body>
</html>
