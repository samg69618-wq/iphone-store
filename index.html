<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Apple Store üçé</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#fff;
  color:#000;
}
header{
  position:sticky;
  top:0;
  background:#fff;
  padding:14px 20px;
  display:flex;
  justify-content:space-between;
  border-bottom:1px solid #eee;
}
header span{cursor:pointer}

section{display:none;animation:fade .4s ease}
section.active{display:block}
@keyframes fade{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:none}
}

.hero{text-align:center;padding:50px 20px}

/* catalog */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
  padding:20px;
}
.card{
  background:#f5f5f7;
  border-radius:28px;
  padding:24px;
  text-align:center;
  cursor:pointer;
  transition:.3s;
}
.card:hover{transform:translateY(-6px)}
.card img{width:140px}

/* product */
.product-img{
  width:260px;
  transition:.4s ease;
}
.price{
  font-size:32px;
  margin:10px 0;
  transition:.3s;
}
.price.anim{transform:scale(1.08);opacity:.6}

.options{
  display:flex;
  justify-content:center;
  gap:10px;
  margin:16px 0;
  flex-wrap:wrap;
}
.option{
  padding:10px 16px;
  border-radius:999px;
  border:1px solid #ddd;
  cursor:pointer;
}
.option.active{
  background:#000;
  color:#fff;
}

/* qty */
.qty{
  display:flex;
  justify-content:center;
  gap:16px;
  margin:20px 0;
}
.qty button{
  width:36px;height:36px;
  border-radius:50%;
  border:none;
  background:#f5f5f7;
  font-size:20px;
}

/* cart */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  align-items:center;
  justify-content:center;
}
.modal{
  background:#fff;
  border-radius:28px;
  padding:24px;
  width:90%;
  max-width:420px;
}
.cart-row{
  display:flex;
  justify-content:space-between;
  margin:10px 0;
}
.total{
  border-top:1px solid #eee;
  padding-top:12px;
  font-weight:600;
}
</style>
</head>

<body>

<header>
  <b onclick="show('catalog')">Apple Store</b>
  <span onclick="openCart()">–ö–æ—Ä–∑–∏–Ω–∞ (<span id="count">0</span>)</span>
</header>

<!-- CATALOG -->
<section id="catalog" class="active">
  <div class="hero">
    <h1>iPhone</h1>
    <p>–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å. –ö–∞–∫ –≤—Å–µ–≥–¥–∞.</p>
  </div>

  <div class="grid">
    <div class="card" onclick="openProduct(1)">
      <img src="https://dummyimage.com/300x600/000/fff&text=iPhone+15+Pro">
      <h3>iPhone 15 Pro</h3>
      <p>–æ—Ç 119 990 ‚ÇΩ</p>
    </div>
    <div class="card" onclick="openProduct(2)">
      <img src="https://dummyimage.com/300x600/555/fff&text=iPhone+15">
      <h3>iPhone 15</h3>
      <p>–æ—Ç 89 990 ‚ÇΩ</p>
    </div>
    <div class="card" onclick="openProduct(3)">
      <img src="https://dummyimage.com/300x600/777/fff&text=iPhone+14">
      <h3>iPhone 14</h3>
      <p>–æ—Ç 69 990 ‚ÇΩ</p>
    </div>
  </div>
</section>

<!-- PRODUCT -->
<section id="product">
  <div class="hero">
    <h1 id="pName"></h1>

    <img id="pImg" class="product-img">

    <div id="pPrice" class="price"></div>

    <h3>–¶–≤–µ—Ç</h3>
    <div class="options" id="colors"></div>

    <h3>–ü–∞–º—è—Ç—å</h3>
    <div class="options" id="memory"></div>

    <div class="qty">
      <button onclick="qty--,updatePrice()">‚àí</button>
      <b id="qty">1</b>
      <button onclick="qty++,updatePrice()">+</button>
    </div>

    <button onclick="add()">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button><br><br>
    <button onclick="show('catalog')">‚Üê –ù–∞–∑–∞–¥</button>
  </div>
</section>

<!-- CART -->
<div id="cart" class="overlay">
  <div class="modal">
    <h2>–í–∞—à –∑–∞–∫–∞–∑</h2>
    <div id="items"></div>
    <div id="total" class="total"></div>
    <button onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button><br><br>
    <button onclick="closeCart()">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<script>
const products={
  1:{
    name:'iPhone 15 Pro',
    base:119990,
    colors:{
      '–ß—ë—Ä–Ω—ã–π':'https://dummyimage.com/300x600/000/fff&text=15+Pro+Black',
      '–¢–∏—Ç–∞–Ω':'https://dummyimage.com/300x600/aaa/000&text=15+Pro+Titan',
      '–ë–µ–ª—ã–π':'https://dummyimage.com/300x600/eee/000&text=15+Pro+White'
    },
    memory:{'128 –ì–ë':0,'256 –ì–ë':10000,'512 –ì–ë':30000}
  },
  2:{
    name:'iPhone 15',
    base:89990,
    colors:{
      '–ß—ë—Ä–Ω—ã–π':'https://dummyimage.com/300x600/000/fff&text=15+Black',
      '–°–∏–Ω–∏–π':'https://dummyimage.com/300x600/1e90ff/fff&text=15+Blue',
      '–†–æ–∑–æ–≤—ã–π':'https://dummyimage.com/300x600/ff69b4/fff&text=15+Pink'
    },
    memory:{'128 –ì–ë':0,'256 –ì–ë':10000}
  },
  3:{
    name:'iPhone 14',
    base:69990,
    colors:{
      '–ß—ë—Ä–Ω—ã–π':'https://dummyimage.com/300x600/000/fff&text=14+Black',
      '–§–∏–æ–ª–µ—Ç–æ–≤—ã–π':'https://dummyimage.com/300x600/7b68ee/fff&text=14+Purple'
    },
    memory:{'128 –ì–ë':0,'256 –ì–ë':8000}
  }
};

let current, selectedColor, selectedMemory, qty=1;
let cart=JSON.parse(localStorage.getItem('cart')||'[]');

function show(id){
  document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function openProduct(id){
  current=id;
  qty=1;
  const p=products[id];
  selectedColor=Object.keys(p.colors)[0];
  selectedMemory=Object.keys(p.memory)[0];
  pName.innerText=p.name;
  pImg.src=p.colors[selectedColor];
  renderOptions('colors',Object.keys(p.colors),v=>{
    selectedColor=v;
    pImg.src=p.colors[v];
  });
  renderOptions('memory',Object.keys(p.memory),v=>{
    selectedMemory=v;
    updatePrice();
  });
  updatePrice();
  show('product');
}

function updatePrice(){
  if(qty<1) qty=1;
  const p=products[current];
  const price=(p.base+p.memory[selectedMemory])*qty;
  pPrice.classList.add('anim');
  setTimeout(()=>pPrice.classList.remove('anim'),200);
  pPrice.innerText=price.toLocaleString('ru-RU')+' ‚ÇΩ';
  document.getElementById('qty').innerText=qty;
}

function renderOptions(id,arr,cb){
  const box=document.getElementById(id);
  box.innerHTML='';
  arr.forEach((v,i)=>{
    const d=document.createElement('div');
    d.className='option'+(i===0?' active':'');
    d.innerText=v;
    d.onclick=()=>{
      box.querySelectorAll('.option').forEach(o=>o.classList.remove('active'));
      d.classList.add('active');
      cb(v);
    };
    box.appendChild(d);
  });
}

function add(){
  const p=products[current];
  const price=(p.base+p.memory[selectedMemory])*qty;
  cart.push({name:p.name,color:selectedColor,memory:selectedMemory,qty,price});
  localStorage.setItem('cart',JSON.stringify(cart));
  count.innerText=cart.length;
  alert('–î–æ–±–∞–≤–ª–µ–Ω–æ üçé');
}

function openCart(){
  let sum=0;
  items.innerHTML=cart.map(p=>{
    sum+=p.price;
    return `<div class="cart-row"><span>${p.name} √ó ${p.qty}</span><span>${p.price.toLocaleString('ru-RU')} ‚ÇΩ</span></div>`;
  }).join('');
  total.innerText='–ò—Ç–æ–≥–æ: '+sum.toLocaleString('ru-RU')+' ‚ÇΩ';
  cartDiv.style.display='flex';
}
function closeCart(){cartDiv.style.display='none';}
function checkout(){localStorage.clear();location.reload();}

const cartDiv=document.getElementById('cart');
const items=document.getElementById('items');
const total=document.getElementById('total');
count.innerText=cart.length;
</script>

</body>
</html>
